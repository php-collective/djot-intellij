<idea-plugin>
    <id>org.phpcollective.djot</id>
    <name>Djot</name>
    <vendor email="info@php-collective.com" url="https://github.com/php-collective">PHP Collective</vendor>

    <description><![CDATA[
    <p>Djot markup language support for JetBrains IDEs.</p>

    <h3>Features</h3>
    <ul>
        <li>Syntax highlighting via TextMate grammar</li>
        <li>Live preview panel</li>
        <li>Export to HTML</li>
        <li>File type recognition (.djot)</li>
        <li>Live templates for quick element insertion (type <code>dj</code> + Tab to see all)</li>
    </ul>

    <h3>About Djot</h3>
    <p>Djot is a lightweight markup language created by John MacFarlane (creator of Pandoc).
    It improves on Markdown with consistent parsing rules and additional features like
    highlighting, super/subscript, and attributes.</p>

    <p>More info: <a href="https://djot.net">djot.net</a></p>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File type registration -->
        <fileType
                name="Djot"
                implementationClass="org.phpcollective.djot.DjotFileType"
                fieldName="INSTANCE"
                language="Djot"
                extensions="djot"/>


        <!-- Preview editor -->
        <fileEditorProvider
                implementation="org.phpcollective.djot.preview.DjotPreviewEditorProvider"/>

        <!-- Tool window for preview -->
        <toolWindow
                id="Djot Preview"
                anchor="right"
                factoryClass="org.phpcollective.djot.preview.DjotPreviewToolWindowFactory"
                icon="/icons/djot.svg"/>

        <!-- Live templates for Djot -->
        <defaultLiveTemplates file="/liveTemplates/Djot.xml"/>
    </extensions>

    <actions>
        <action id="Djot.Preview"
                class="org.phpcollective.djot.actions.TogglePreviewAction"
                text="Toggle Djot Preview"
                description="Show/hide Djot preview panel"
                icon="/icons/djot.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift D"/>
        </action>

        <action id="Djot.ExportHtml"
                class="org.phpcollective.djot.actions.ExportHtmlAction"
                text="Export to HTML"
                description="Export Djot file to HTML">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
